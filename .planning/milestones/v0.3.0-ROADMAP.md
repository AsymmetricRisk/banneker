# Milestone v0.3.0: The Engineer

**Status:** SHIPPED 2026-02-04
**Phases:** 11-15
**Total Plans:** 19

## Overview

Add `/banneker:engineer` command that shifts from interviewing to engineering mode when users reach their knowledge limits during surveys. The engineer agent synthesizes partial survey data into three documents (DIAGNOSIS, RECOMMENDATION, ENGINEERING-PROPOSAL) with confidence markers, while cliff detection triggers mode switch offers and the approval flow ensures user control over all decisions.

## Phases

### Phase 11: Engineer Agent Core

**Goal**: Standalone engineer capability that synthesizes survey data into actionable engineering documents with explicit confidence levels.
**Depends on**: Phase 10 (v0.2.0 complete)
**Plans**: 4 plans

Plans:
- [x] 11-01: Engineer sub-agent and engineering catalog specs
- [x] 11-02: Engineer command orchestrator skill file
- [x] 11-03: State management and partial data handling
- [x] 11-04: Installer manifest update and tests

**Details:**
- Three-document architecture: DIAGNOSIS (gap analysis), RECOMMENDATION (options), ENGINEERING-PROPOSAL (ADR decisions)
- Confidence system: HIGH (85-90%), MEDIUM (50-85%), LOW (<50%) with probabilistic ranges
- All proposals marked "Proposed (awaiting approval)" - no auto-merge
- Minimum viable survey: Phases 1-3 required (project, actors, walkthroughs)

---

### Phase 12: Cliff Detection

**Goal**: Detect when users reach their knowledge limits during surveys and offer mode switch with explicit confirmation.
**Depends on**: Phase 11
**Plans**: 3 plans

Plans:
- [x] 12-01: Schema extension and cliff detection config reference
- [x] 12-02: Surveyor modification with detection logic and confirmation flow
- [x] 12-03: Cliff detection module and tests (TDD)

**Details:**
- 14 explicit cliff signals for HIGH confidence detection
- cliff_signals optional property for backward compatibility
- Three-option confirmation flow (switch/continue/skip) per CLIFF-02
- Two declined offers before suppression threshold
- All detections logged regardless of offer status (audit trail)

---

### Phase 13: Approval Flow

**Goal**: Granular user approval workflow before any AI-generated decisions merge into the project's decision record.
**Depends on**: Phase 11
**Plans**: 3 plans

Plans:
- [x] 13-01: Core approval lib modules (merge logic, display formatting)
- [x] 13-02: Approve command orchestrator and interactive prompts
- [x] 13-03: Installer tests and approval workflow integration tests

**Details:**
- Atomic write uses backup + .tmp + rename pattern for POSIX safety
- Rejection log includes full_decision for potential recovery
- Display groups by domain field with global numbered indices
- Editor fallback chain: $EDITOR -> $VISUAL -> vi
- Batch selection defaults to reject-all on too many invalid attempts (safety)

---

### Phase 14: Survey Integration

**Goal**: Integrate engineer mode into the survey pipeline with proper context handoff when users hit knowledge cliffs mid-interview.
**Depends on**: Phase 12, Phase 13
**Plans**: 4 plans

Plans:
- [x] 14-01: Cliff tracking state management and phase boundary offers
- [x] 14-02: Context handoff protocol and surveyor_notes persistence
- [x] 14-03: Integration tests for survey-to-engineer flow
- [x] 14-04: Gap closure: Engineer handoff context consumption

**Details:**
- Phase 1-5 get cliff detection checks; Phase 6 excluded
- Dual handoff: surveyor_notes in survey.json + surveyor-context.md for readable context
- Minimum viability threshold at 55% (Phases 1-3 complete) before engineer mode switch
- Handoff Context section MANDATORY in DIAGNOSIS.md when handoff context exists
- Uncertain topics from handoff map to LOW confidence recommendations

---

### Phase 15: Polish & Advanced Detection

**Goal**: Add sophisticated cliff detection (implicit signals, compound detection) and engineering safeguards (complexity ceiling, research capability).
**Depends on**: Phase 14
**Plans**: 5 plans

Plans:
- [x] 15-01: TDD: Implicit signal detection and compound logic
- [x] 15-02: TDD: Complexity ceiling module
- [x] 15-03: Surveyor compound detection integration
- [x] 15-04: Engineer complexity ceiling and research-on-demand
- [x] 15-05: Integration tests and installer update

**Details:**
- Implicit signals use MEDIUM confidence vs explicit HIGH
- Compound threshold requires 2+ implicit signals across current + last 3 responses
- 3 implicit signal categories: hedging (10), quality_markers (7), deferrals (7)
- maxComplexity levels: standard (default), minimal (constrained), enterprise
- Research limited to 3 WebSearch queries per engineer session
- Complexity violations flagged but not blocked (user can override)

---

## Milestone Summary

**Key Decisions:**
- Three-document architecture separates gap analysis, options analysis, and concrete proposals (11-01)
- Confidence system uses HIGH (85-90%), MEDIUM (50-85%), LOW (<50%) with probabilistic ranges (11-01)
- All proposals marked "Proposed (awaiting approval)" - no auto-merge to architecture-decisions.json (11-01)
- Dual handoff sources: use both when available, either when only one exists (14-04)
- Implicit signals use MEDIUM confidence vs explicit HIGH (15-01)
- Compound threshold requires 2+ implicit signals across current + last 3 responses (15-01)
- maxComplexity levels: standard (default), minimal (constrained), enterprise (15-02)
- Research limited to 3 WebSearch queries per engineer session (15-04)

**Issues Resolved:**
- Mid-survey mode switch flow is end-to-end functional
- All handoff artifacts now properly generated AND consumed
- Complexity ceiling prevents over-engineering for constrained projects
- Implicit cliff detection reduces false positives via compound threshold

**Issues Deferred:**
- Configurable detection sensitivity (defer to v0.4.0 after real-world tuning)
- Multi-proposal comparison (single best proposal sufficient for MVP)
- Decision rollback/undo (users can manually edit architecture-decisions.json)

**Technical Debt Incurred:**
None - all phases completed without deferred items.

---

_For current project status, see .planning/ROADMAP.md_
