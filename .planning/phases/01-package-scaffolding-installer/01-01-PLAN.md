---
phase: 01-package-scaffolding-installer
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - bin/banneker.js
  - lib/constants.js
  - templates/commands/.gitkeep
  - templates/config/.gitkeep
  - VERSION
  - .gitignore
  - .npmignore
autonomous: true

must_haves:
  truths:
    - "package.json exists with correct name, version, bin field, type module, and engines"
    - "bin/banneker.js is executable with correct shebang"
    - "Project directory structure matches research architecture"
  artifacts:
    - path: "package.json"
      provides: "npm package configuration"
      contains: "banneker"
    - path: "bin/banneker.js"
      provides: "CLI entry point"
      contains: "#!/usr/bin/env node"
    - path: "lib/constants.js"
      provides: "Shared constants (version, runtime configs, file manifest)"
      exports: ["VERSION", "RUNTIMES", "BANNEKER_FILES"]
    - path: "VERSION"
      provides: "Version file for install detection"
      contains: "0.2.0"
  key_links:
    - from: "package.json"
      to: "bin/banneker.js"
      via: "bin field"
      pattern: '"banneker".*"./bin/banneker.js"'
    - from: "bin/banneker.js"
      to: "lib/installer.js"
      via: "dynamic import (will exist after plan 03)"
      pattern: "import.*installer"
---

<objective>
Scaffold the npm package structure for Banneker with all foundational files, directory layout, and shared constants.

Purpose: Establish the package skeleton so that all subsequent plans have a working npm package to build on. Without this, nothing else can run.
Output: A valid npm package with bin entry point, shared constants module, placeholder template directories, and VERSION file.
</objective>

<execution_context>
@/home/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/home/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-package-scaffolding-installer/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create npm package structure and configuration</name>
  <files>package.json, .gitignore, .npmignore, VERSION</files>
  <action>
Create the npm package foundation:

1. **package.json** with these exact fields:
   - `"name": "banneker"`
   - `"version": "0.2.0"`
   - `"description": "Project planning and documentation pipeline for AI coding assistants"`
   - `"type": "module"` (ES modules)
   - `"bin": { "banneker": "./bin/banneker.js" }`
   - `"engines": { "node": ">=18.0.0" }`
   - `"license": "MIT"`
   - `"files": ["bin/", "lib/", "templates/", "VERSION"]` (what npm publishes)
   - NO dependencies or devDependencies yet (Phase 2 adds test runner)
   - `"scripts": {}` (empty for now)

2. **VERSION** file containing just `0.2.0\n`

3. **.gitignore** with node_modules/, .DS_Store, *.log entries

4. **.npmignore** with .planning/, .banneker/, .claude/, .git/, *.ipynb, DIAGRAM-GUIDE.md, TECHNICAL_SUMMARY_GUIDE.md

Do NOT add any dependencies. The zero-dependency constraint is a hard requirement (REQ-INST-007).
  </action>
  <verify>
Run `node -e "const pkg = JSON.parse(require('fs').readFileSync('package.json','utf8')); console.log(pkg.name, pkg.version, pkg.type, pkg.bin.banneker, pkg.engines.node)"` from project root. Should output: `banneker 0.2.0 module ./bin/banneker.js >=18.0.0`
  </verify>
  <done>package.json has correct name/version/bin/type/engines/files fields, VERSION contains 0.2.0, .gitignore and .npmignore exist with appropriate entries</done>
</task>

<task type="auto">
  <name>Task 2: Create bin entry point, constants module, and directory structure</name>
  <files>bin/banneker.js, lib/constants.js, templates/commands/.gitkeep, templates/config/.gitkeep</files>
  <action>
Create the executable entry point and shared constants:

1. **bin/banneker.js** -- the CLI entry point:
   - First line: `#!/usr/bin/env node`
   - Import and call the main installer function from `../lib/installer.js`
   - Wrap in try/catch with `process.exitCode = 1` on error
   - Add SIGINT handler: `process.on('SIGINT', () => { console.log('\nInstallation cancelled.'); process.exit(130); });`
   - NOTE: `lib/installer.js` does not exist yet (created in Plan 03). For now, have the import wrapped so the file is syntactically valid but will fail at runtime with a clear message if installer.js is missing. Use a dynamic import: `const { run } = await import('../lib/installer.js');` inside an async IIFE.

2. **lib/constants.js** -- shared constants used by all lib modules:
   - Export `VERSION = '0.2.0'`
   - Export `RUNTIMES` object mapping runtime names to their install paths relative to homedir:
     ```
     claude: { commands: '.claude/commands', config: '.claude' }
     opencode: { commands: '.opencode/commands', config: '.opencode' }
     gemini: { commands: '.gemini/commands', config: '.gemini' }
     ```
   - Export `BANNEKER_FILES` array listing all files Banneker will install (for uninstall tracking). For now use placeholder list: `['VERSION']`. This grows as skill files are added in later phases.
   - Export `RUNTIME_CHOICES` array: `['claude', 'opencode', 'gemini']` for validation.
   - Use `node:` prefix for all built-in imports (e.g., `import path from 'node:path'`).

3. **templates/commands/.gitkeep** and **templates/config/.gitkeep** -- placeholder directories for template files that will be populated in later phases.

After creating bin/banneker.js, make it executable: the file should have the shebang and npm will handle permissions on publish. For local testing, run `chmod +x bin/banneker.js`.
  </action>
  <verify>
Run these commands from project root:
1. `node -e "import('./lib/constants.js').then(m => console.log(m.VERSION, Object.keys(m.RUNTIMES).join(','), m.RUNTIME_CHOICES.join(',')))"` -- should output: `0.2.0 claude,opencode,gemini claude,opencode,gemini`
2. `head -1 bin/banneker.js` -- should output: `#!/usr/bin/env node`
3. `ls templates/commands/ templates/config/` -- both directories should exist
  </verify>
  <done>bin/banneker.js exists with shebang and SIGINT handler, lib/constants.js exports VERSION/RUNTIMES/BANNEKER_FILES/RUNTIME_CHOICES, template directories exist</done>
</task>

</tasks>

<verification>
- `node -e "JSON.parse(require('fs').readFileSync('package.json','utf8'))"` parses without error
- `node --input-type=module -e "import {VERSION, RUNTIMES, RUNTIME_CHOICES} from './lib/constants.js'; console.log(VERSION, Object.keys(RUNTIMES), RUNTIME_CHOICES)"` runs without error
- `head -1 bin/banneker.js` shows shebang
- No node_modules directory exists
- No dependencies in package.json
</verification>

<success_criteria>
Valid npm package skeleton with bin entry, shared constants, template directories, and VERSION file. All subsequent plans can import from lib/constants.js and build on this structure.
</success_criteria>

<output>
After completion, create `.planning/phases/01-package-scaffolding-installer/01-01-SUMMARY.md`
</output>
