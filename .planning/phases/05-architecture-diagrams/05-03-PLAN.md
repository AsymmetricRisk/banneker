---
phase: 05-architecture-diagrams
plan: 03
type: execute
wave: 3
depends_on: ["05-01", "05-02"]
files_modified:
  - lib/constants.js
  - test/integration/skill-validation.test.js
  - test/smoke/full-install.test.js
autonomous: true

must_haves:
  truths:
    - "BANNEKER_FILES manifest includes banneker-roadmap command and banneker-diagrammer agent"
    - "AGENT_FILES includes banneker-diagrammer.md"
    - "Integration tests validate YAML frontmatter for new agent and command files"
    - "Smoke tests verify new files are installed to correct directories"
  artifacts:
    - path: "lib/constants.js"
      provides: "Updated manifest with Phase 5 files"
      contains: "banneker-diagrammer"
    - path: "test/integration/skill-validation.test.js"
      provides: "YAML validation for new template files"
      contains: "banneker-diagrammer"
    - path: "test/smoke/full-install.test.js"
      provides: "Installation verification for new files"
      contains: "banneker-roadmap"
  key_links:
    - from: "lib/constants.js"
      to: "templates/agents/banneker-diagrammer.md"
      via: "BANNEKER_FILES and AGENT_FILES arrays"
      pattern: "banneker-diagrammer"
    - from: "lib/constants.js"
      to: "templates/commands/banneker-roadmap.md"
      via: "BANNEKER_FILES array"
      pattern: "banneker-roadmap"
---

<objective>
Update the installer manifest and tests to include Phase 5 template files (banneker-diagrammer agent and banneker-roadmap command).

Purpose: Every new template file must be registered in BANNEKER_FILES for install/uninstall tracking, and covered by integration and smoke tests. This follows the exact pattern established in Phase 4 Plan 04 (04-04-PLAN.md).

Output: Updated `lib/constants.js` with new file entries, updated integration and smoke tests.
</objective>

<execution_context>
@/home/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/home/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-document-generation/04-04-SUMMARY.md
@lib/constants.js
@test/integration/skill-validation.test.js
@test/smoke/full-install.test.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update lib/constants.js with Phase 5 file entries</name>
  <files>lib/constants.js</files>
  <action>
Add Phase 5 template files to the manifest constants in `lib/constants.js`:

**BANNEKER_FILES array — add 2 entries:**
- `'banneker-roadmap.md'` — command file (installed to `{runtime}/commands/`)
- `'agents/banneker-diagrammer.md'` — agent file (installed to `{runtime}/agents/`)

**AGENT_FILES array — add 1 entry:**
- `'banneker-diagrammer.md'`

Follow the existing ordering pattern: command files are listed with other command files (root-level entries), agent files are listed with other agent files (agents/ prefix entries).

Do NOT modify RUNTIMES, VERSION, RUNTIME_CHOICES, or CONFIG_FILES — those are unchanged for Phase 5.
  </action>
  <verify>
Run: `node -e "import { BANNEKER_FILES, AGENT_FILES } from './lib/constants.js'; console.log('BANNEKER_FILES:', BANNEKER_FILES); console.log('AGENT_FILES:', AGENT_FILES);"` and confirm:
- BANNEKER_FILES contains 'banneker-roadmap.md' and 'agents/banneker-diagrammer.md'
- AGENT_FILES contains 'banneker-diagrammer.md'
  </verify>
  <done>
- BANNEKER_FILES includes both new Phase 5 entries (command + agent)
- AGENT_FILES includes banneker-diagrammer.md
- Existing entries unchanged
  </done>
</task>

<task type="auto">
  <name>Task 2: Update integration and smoke tests for Phase 5 files</name>
  <files>test/integration/skill-validation.test.js, test/smoke/full-install.test.js</files>
  <action>
**Integration tests (`test/integration/skill-validation.test.js`):**

Add test cases for the 2 new template files, following the exact pattern used for Phase 4 files:

1. **banneker-roadmap command test:** Validate that `templates/commands/banneker-roadmap.md` has valid YAML frontmatter with `name` and `description` fields. The `name` field should equal `banneker-roadmap`.

2. **banneker-diagrammer agent test:** Validate that `templates/agents/banneker-diagrammer.md` has valid YAML frontmatter with `name` and `description` fields. The `name` field should equal `banneker-diagrammer`.

Follow the existing test structure — look at how banneker-architect and banneker-writer are tested and replicate that pattern exactly.

**Smoke tests (`test/smoke/full-install.test.js`):**

Add verification that new files are installed to correct directories:

1. Verify `banneker-roadmap.md` is installed to `{runtime}/commands/banneker-roadmap.md`
2. Verify `banneker-diagrammer.md` is installed to `{runtime}/agents/banneker-diagrammer.md`

Follow the existing smoke test pattern for verifying file existence after installation.
  </action>
  <verify>
Run the test suite: `node --test test/integration/skill-validation.test.js` — all tests pass including new Phase 5 tests.
Run smoke tests: `node --test test/smoke/full-install.test.js` — all tests pass including new Phase 5 file verification.
  </verify>
  <done>
- Integration tests validate YAML frontmatter for banneker-roadmap command and banneker-diagrammer agent
- Smoke tests verify both new files install to correct directories
- All existing tests continue to pass
- All new tests pass
  </done>
</task>

</tasks>

<verification>
1. `node --test test/integration/skill-validation.test.js` passes (including new Phase 5 tests)
2. `node --test test/smoke/full-install.test.js` passes (including new Phase 5 file checks)
3. `lib/constants.js` contains all Phase 5 file entries
4. No existing tests broken
</verification>

<success_criteria>
- BANNEKER_FILES manifest includes both new Phase 5 template files
- AGENT_FILES includes banneker-diagrammer.md
- Integration tests validate frontmatter for new files
- Smoke tests verify installation paths for new files
- Full test suite passes green
</success_criteria>

<output>
After completion, create `.planning/phases/05-architecture-diagrams/05-03-SUMMARY.md`
</output>
