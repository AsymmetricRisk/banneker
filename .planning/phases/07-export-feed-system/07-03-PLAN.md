---
phase: 07-export-feed-system
plan: 03
type: execute
wave: 3
depends_on: ["07-01", "07-02"]
files_modified:
  - lib/constants.js
  - test/integration/skill-validation.test.js
  - test/smoke/full-install.test.js
autonomous: true

must_haves:
  truths:
    - "banneker-feed command is tracked in BANNEKER_FILES manifest"
    - "banneker-exporter agent is tracked in both BANNEKER_FILES and AGENT_FILES"
    - "framework-adapters config is tracked in both BANNEKER_FILES and CONFIG_FILES"
    - "Integration tests validate YAML frontmatter for new command and agent files"
    - "Smoke tests verify new files install to correct directories"
  artifacts:
    - path: "lib/constants.js"
      provides: "Updated manifests with Phase 7 files"
      contains: "banneker-feed"
    - path: "test/integration/skill-validation.test.js"
      provides: "Frontmatter validation tests for Phase 7 files"
      contains: "banneker-feed"
    - path: "test/smoke/full-install.test.js"
      provides: "Installation verification for Phase 7 files"
      contains: "banneker-feed"
  key_links:
    - from: "lib/constants.js"
      to: "templates/commands/banneker-feed.md"
      via: "BANNEKER_FILES manifest entry"
      pattern: "banneker-feed\\.md"
    - from: "lib/constants.js"
      to: "templates/agents/banneker-exporter.md"
      via: "BANNEKER_FILES and AGENT_FILES manifest entries"
      pattern: "banneker-exporter\\.md"
    - from: "lib/constants.js"
      to: "templates/config/framework-adapters.md"
      via: "BANNEKER_FILES and CONFIG_FILES manifest entries"
      pattern: "framework-adapters\\.md"
---

<objective>
Update the installer manifest (lib/constants.js) with Phase 7 file entries and add integration/smoke tests for all new template files. This follows the exact pattern established in Phases 3-6 for manifest updates.

Purpose: Every new template file must be tracked in the installer manifest for proper installation and uninstallation. Integration tests validate YAML frontmatter structure. Smoke tests verify files install to correct directories. This is the final plan that makes Phase 7 files installable.

Output: Updated `lib/constants.js`, `test/integration/skill-validation.test.js`, and `test/smoke/full-install.test.js`
</objective>

<execution_context>
@/home/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/home/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Files to modify
@lib/constants.js
@test/integration/skill-validation.test.js
@test/smoke/full-install.test.js

# Prior manifest update summaries for pattern reference
@.planning/phases/06-html-appendix/06-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update lib/constants.js with Phase 7 file entries</name>
  <files>lib/constants.js</files>
  <action>
Add Phase 7 files to the installer manifest arrays in `lib/constants.js`, following the exact pattern from Phases 3-6:

**BANNEKER_FILES array — add 3 entries:**
1. `'banneker-feed.md'` — command file (root level, installed to `{runtime}/commands/`)
2. `'agents/banneker-exporter.md'` — agent file (agents/ prefix for path-based routing)
3. `'config/framework-adapters.md'` — config file (config/ prefix for path-based routing)

**AGENT_FILES array — add 1 entry:**
1. `'banneker-exporter.md'` — agent filename without prefix (installed to `{runtime}/agents/`)

**CONFIG_FILES array — add 1 entry:**
1. `'framework-adapters.md'` — config filename without prefix (installed to `{runtime}/config/`)

Place new entries at the end of each array, maintaining the existing order pattern (entries are grouped by phase).
  </action>
  <verify>
1. Run: `node -e "import('./lib/constants.js').then(m => { console.log('BANNEKER_FILES:', m.BANNEKER_FILES.length); console.log('AGENT_FILES:', m.AGENT_FILES.length); console.log('CONFIG_FILES:', m.CONFIG_FILES.length); })"`
2. Verify BANNEKER_FILES contains 'banneker-feed.md', 'agents/banneker-exporter.md', 'config/framework-adapters.md'
3. Verify AGENT_FILES contains 'banneker-exporter.md'
4. Verify CONFIG_FILES contains 'framework-adapters.md'
5. No syntax errors: `node --check lib/constants.js` (or `node -e "import('./lib/constants.js')"`)
  </verify>
  <done>
`lib/constants.js` BANNEKER_FILES includes banneker-feed.md (root), agents/banneker-exporter.md (agents/ prefix), and config/framework-adapters.md (config/ prefix). AGENT_FILES includes banneker-exporter.md. CONFIG_FILES includes framework-adapters.md. Module imports without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add integration and smoke tests for Phase 7 template files</name>
  <files>test/integration/skill-validation.test.js, test/smoke/full-install.test.js</files>
  <action>
Update both test files following the exact pattern from Phase 6 (06-03-SUMMARY.md):

**test/integration/skill-validation.test.js — add 2 new test cases:**

1. **banneker-feed command validation:**
   - Read `templates/commands/banneker-feed.md`
   - Verify YAML frontmatter exists (starts with `---`, has closing `---`)
   - Verify `name` field equals `banneker-feed`
   - Verify `description` field is present and non-empty
   - Follow exact test pattern from existing command validation tests in the file

2. **banneker-exporter agent validation:**
   - Read `templates/agents/banneker-exporter.md`
   - Verify YAML frontmatter exists
   - Verify `name` field equals `banneker-exporter`
   - Verify `description` field is present and non-empty
   - Follow exact test pattern from existing agent validation tests in the file

Note: framework-adapters.md has NO frontmatter (config files don't have frontmatter per decision 04-04), so no frontmatter validation test for it. However, add a test that verifies the file exists and is non-empty.

**test/smoke/full-install.test.js — add 3 new verification entries:**

1. Verify `banneker-feed.md` installs to `{runtime}/commands/banneker-feed.md`
2. Verify `banneker-exporter.md` installs to `{runtime}/agents/banneker-exporter.md`
3. Verify `framework-adapters.md` installs to `{runtime}/config/framework-adapters.md`

Follow the exact pattern of existing smoke test entries — look at how banneker-appendix and banneker-publisher are verified and replicate that pattern for the new files.
  </action>
  <verify>
1. Run full test suite: `npm test` — all tests must pass
2. Verify new integration tests exist: grep for "banneker-feed" and "banneker-exporter" in test/integration/skill-validation.test.js
3. Verify new smoke test entries: grep for "banneker-feed" and "banneker-exporter" and "framework-adapters" in test/smoke/full-install.test.js
4. Count total tests to confirm increase (should be 2-3 more integration tests and 3 more smoke test entries than before)
  </verify>
  <done>
Integration tests validate YAML frontmatter for banneker-feed command and banneker-exporter agent. Config file existence test added for framework-adapters.md. Smoke tests verify all 3 new files install to correct directories. Full test suite passes with no regressions.
  </done>
</task>

</tasks>

<verification>
1. `lib/constants.js` contains all Phase 7 file entries in correct manifest arrays
2. `test/integration/skill-validation.test.js` has frontmatter validation for command and agent files
3. `test/smoke/full-install.test.js` verifies installation of all 3 new files
4. `npm test` passes with zero failures
5. No existing tests regress
</verification>

<success_criteria>
- All 3 Phase 7 files tracked in BANNEKER_FILES
- Agent tracked in AGENT_FILES, config tracked in CONFIG_FILES
- Integration tests validate frontmatter structure for command and agent
- Smoke tests verify installation to correct runtime directories
- Full test suite green
</success_criteria>

<output>
After completion, create `.planning/phases/07-export-feed-system/07-03-SUMMARY.md`
</output>
