---
phase: 08-brownfield-analysis-audit
plan: 04
type: execute
wave: 3
depends_on: ["08-03"]
files_modified:
  - lib/constants.js
  - test/integration/skill-validation.test.js
  - test/smoke/full-install.test.js
autonomous: true

must_haves:
  truths:
    - "BANNEKER_FILES manifest includes all Phase 8 files"
    - "AGENT_FILES includes banneker-cartographer and banneker-auditor"
    - "CONFIG_FILES includes completeness-rubric"
    - "Integration tests validate frontmatter for new command and agent files"
    - "Smoke tests verify installation of all Phase 8 files"
  artifacts:
    - path: "lib/constants.js"
      provides: "Updated manifests with Phase 8 entries"
      contains: "banneker-cartographer"
    - path: "test/integration/skill-validation.test.js"
      provides: "Integration tests for Phase 8 template files"
      contains: "banneker-document"
    - path: "test/smoke/full-install.test.js"
      provides: "Smoke tests for Phase 8 file installation"
      contains: "banneker-cartographer"
  key_links:
    - from: "lib/constants.js"
      to: "lib/installer.js"
      via: "installer reads BANNEKER_FILES to know which files to install"
      pattern: "BANNEKER_FILES"
    - from: "lib/constants.js"
      to: "lib/uninstaller.js"
      via: "uninstaller reads BANNEKER_FILES to know which files to remove"
      pattern: "BANNEKER_FILES"
---

<objective>
Update the installer manifest and tests for all Phase 8 template files.

Purpose: Every new template file must be tracked in BANNEKER_FILES for the installer to copy it and the uninstaller to remove it. This plan adds the 5 new Phase 8 files (2 commands, 2 agents, 1 config) to the manifests and adds integration/smoke test coverage. This follows the exact pattern established in Phases 4, 5, 6, and 7.

Output: Updated lib/constants.js, test/integration/skill-validation.test.js, test/smoke/full-install.test.js
</objective>

<execution_context>
@/home/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/home/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md

# Reference the manifest update pattern from Phase 7
@.planning/phases/07-export-feed-system/07-03-SUMMARY.md

# Files to modify
@lib/constants.js
@test/integration/skill-validation.test.js
@test/smoke/full-install.test.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update lib/constants.js with Phase 8 file entries</name>
  <files>lib/constants.js</files>
  <action>
Add all 5 Phase 8 files to the appropriate constants in lib/constants.js. Follow the exact pattern from prior phases.

**Add to BANNEKER_FILES array:**
- `'banneker-document.md'` (command - root level, no prefix)
- `'banneker-audit.md'` (command - root level, no prefix)
- `'agents/banneker-cartographer.md'` (agent - agents/ prefix)
- `'agents/banneker-auditor.md'` (agent - agents/ prefix)
- `'config/completeness-rubric.md'` (config - config/ prefix)

**Add to AGENT_FILES array:**
- `'banneker-cartographer.md'`
- `'banneker-auditor.md'`

**Add to CONFIG_FILES array:**
- `'completeness-rubric.md'`

Maintain alphabetical ordering within each array where the existing entries are ordered. Keep existing entries unchanged.
  </action>
  <verify>
Run `node -e "import('./lib/constants.js').then(m => { console.log('BANNEKER_FILES:', m.BANNEKER_FILES.length); console.log('AGENT_FILES:', m.AGENT_FILES.length); console.log('CONFIG_FILES:', m.CONFIG_FILES.length); console.log('Has document:', m.BANNEKER_FILES.includes('banneker-document.md')); console.log('Has audit:', m.BANNEKER_FILES.includes('banneker-audit.md')); console.log('Has cartographer:', m.BANNEKER_FILES.includes('agents/banneker-cartographer.md')); console.log('Has auditor:', m.BANNEKER_FILES.includes('agents/banneker-auditor.md')); console.log('Has rubric:', m.BANNEKER_FILES.includes('config/completeness-rubric.md')); })"` — all should be true, BANNEKER_FILES count should be 19, AGENT_FILES 8, CONFIG_FILES 3.
  </verify>
  <done>
lib/constants.js contains all 5 Phase 8 files in BANNEKER_FILES, 2 new agents in AGENT_FILES, and 1 new config in CONFIG_FILES. All arrays have correct counts (19, 8, 3 respectively).
  </done>
</task>

<task type="auto">
  <name>Task 2: Update integration and smoke tests for Phase 8 files</name>
  <files>test/integration/skill-validation.test.js, test/smoke/full-install.test.js</files>
  <action>
Add test cases for all 5 Phase 8 template files following the exact pattern from prior phases (see existing tests for banneker-feed, banneker-exporter, framework-adapters).

**Integration tests (test/integration/skill-validation.test.js):**
Add test cases for:
1. `banneker-document.md` (command) - validate YAML frontmatter exists, has name field matching "banneker-document"
2. `banneker-audit.md` (command) - validate YAML frontmatter exists, has name field matching "banneker-audit"
3. `banneker-cartographer.md` (agent) - validate YAML frontmatter exists, has name field matching "banneker-cartographer"
4. `banneker-auditor.md` (agent) - validate YAML frontmatter exists, has name field matching "banneker-auditor"
5. `completeness-rubric.md` (config) - validate file exists, has content, does NOT have YAML frontmatter (no --- at line 1)

Follow the exact test pattern used for existing Phase 4-7 files.

**Smoke tests (test/smoke/full-install.test.js):**
Add verification that after installation:
1. Command files banneker-document.md and banneker-audit.md exist in commands directory
2. Agent files banneker-cartographer.md and banneker-auditor.md exist in agents directory
3. Config file completeness-rubric.md exists in config directory

Follow the exact pattern used for Phase 4-7 file verification.
  </action>
  <verify>
Run `node --test test/integration/skill-validation.test.js` — all tests pass including new Phase 8 tests.
Run `node --test test/smoke/full-install.test.js` — all tests pass including new Phase 8 file verification.
  </verify>
  <done>
Integration tests validate frontmatter for 4 new command/agent files and content-only for 1 new config file. Smoke tests verify all 5 Phase 8 files install to correct directories. All tests pass.
  </done>
</task>

</tasks>

<verification>
- `node --test test/integration/` — all integration tests pass
- `node --test test/smoke/` — all smoke tests pass
- lib/constants.js exports correct array sizes (BANNEKER_FILES: 19, AGENT_FILES: 8, CONFIG_FILES: 3)
- No existing tests broken by additions
</verification>

<success_criteria>
- All 5 Phase 8 files tracked in BANNEKER_FILES manifest
- AGENT_FILES contains banneker-cartographer and banneker-auditor
- CONFIG_FILES contains completeness-rubric
- Integration tests validate frontmatter for commands/agents and content for config
- Smoke tests verify installation of all Phase 8 files
- All existing tests continue to pass
</success_criteria>

<output>
After completion, create `.planning/phases/08-brownfield-analysis-audit/08-04-SUMMARY.md`
</output>
