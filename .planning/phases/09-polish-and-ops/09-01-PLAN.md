---
phase: 09-polish-and-ops
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - templates/commands/banneker-help.md
  - templates/commands/banneker-progress.md
autonomous: true

must_haves:
  truths:
    - "/banneker:help displays categorized command reference with all 11 commands"
    - "/banneker:progress reads .banneker/state/ files and displays workflow status"
    - "Help command dynamically reads installed command frontmatter, not hardcoded list"
    - "Progress command handles no-state (all complete) and in-progress states"
  artifacts:
    - path: "templates/commands/banneker-help.md"
      provides: "Command reference utility"
      contains: "banneker-help"
    - path: "templates/commands/banneker-progress.md"
      provides: "State file reader for progress tracking"
      contains: "banneker-progress"
  key_links:
    - from: "templates/commands/banneker-help.md"
      to: "~/.claude/commands/banneker-*.md"
      via: "dynamic frontmatter reading"
      pattern: "banneker-\\*\\.md"
    - from: "templates/commands/banneker-progress.md"
      to: ".banneker/state/"
      via: "state file parsing"
      pattern: "\\.banneker/state/"
---

<objective>
Implement the help and progress utility commands for Banneker.

Purpose: Users need command discovery (/banneker:help) and workflow status visibility (/banneker:progress) to use Banneker effectively. These are the two simpler utility commands that follow the orchestrator pattern but do not require sub-agents.

Output: Two command template files replacing the existing help stub and adding a new progress command.
</objective>

<execution_context>
@/home/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/home/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@templates/commands/banneker-help.md (current stub to replace)
@templates/commands/banneker-survey.md (reference for orchestrator pattern)
@templates/commands/banneker-architect.md (reference for resume detection pattern)
@.planning/phases/09-polish-and-ops/09-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement banneker-help command</name>
  <files>templates/commands/banneker-help.md</files>
  <action>
Replace the existing stub in templates/commands/banneker-help.md with a full command implementation.

The help command must:

1. **Frontmatter:** name: banneker-help, description: "Display Banneker command reference with all available commands, categories, and usage examples"

2. **Step 1: Dynamic Command Discovery** — Read all banneker-*.md files from the installed commands directory (use `ls ~/.claude/commands/banneker-*.md 2>/dev/null` or equivalent for the active runtime). For each file, extract the `name` and `description` fields from YAML frontmatter.

3. **Step 2: Display Categorized Reference** — Group commands into categories and display:
   - **Discovery:** survey — 6-phase structured discovery interview
   - **Planning:** architect — generate planning documents from survey data; document — analyze existing codebase (brownfield); audit — evaluate plans against completeness rubric
   - **Visualization:** roadmap — generate HTML architecture diagrams; appendix — compile HTML reference from documents and diagrams
   - **Export:** feed — export to GSD, platform prompt, generic summary, and context bundle formats
   - **Utilities:** help — this command reference; progress — show workflow state; plat — generate sitemap and route architecture

4. **Step 3: Display Quick Start** — Show recommended workflow sequence for new users:
   1. `/banneker:survey` — conduct discovery interview
   2. `/banneker:architect` — generate planning documents
   3. `/banneker:roadmap` — create architecture diagrams
   4. `/banneker:appendix` — compile HTML reference
   5. `/banneker:feed` — export to downstream frameworks
   6. `/banneker:progress` — check workflow status anytime

5. **Step 4: Version Info** — Display Banneker version by reading the VERSION file from the install directory.

Do NOT use the full orchestrator pattern with resume detection — help is a stateless read-only command. Keep it simple. No sub-agent needed.

Important: The command should dynamically discover commands from the filesystem (Step 1), then fall back to the hardcoded reference (Step 2) if dynamic discovery yields no results. This ensures the help command works even if the directory structure is unexpected.
  </action>
  <verify>
Verify the file has:
- Valid YAML frontmatter with name and description
- Dynamic command discovery via filesystem reading
- Categorized command listing with all 11 commands (survey, architect, document, audit, roadmap, appendix, feed, help, progress, plat — that's 10 commands plus the skill names)
- Quick start workflow section
- No resume detection or state tracking (not a long-running command)

```bash
grep -c "banneker:" templates/commands/banneker-help.md
# Should show 10+ occurrences (one per command reference)
```
  </verify>
  <done>banneker-help.md contains a complete command reference with dynamic discovery, categorized command listing covering all Banneker commands, quick start workflow, and version display. File has valid frontmatter.</done>
</task>

<task type="auto">
  <name>Task 2: Implement banneker-progress command</name>
  <files>templates/commands/banneker-progress.md</files>
  <action>
Create templates/commands/banneker-progress.md as a new command file.

The progress command must:

1. **Frontmatter:** name: banneker-progress, description: "Show current Banneker workflow state from state files and available outputs"

2. **Step 1: Check for .banneker Directory** — Verify .banneker/ exists. If not, display "No Banneker project initialized. Run /banneker:survey to start." and exit.

3. **Step 2: Read State Files** — List and parse all files in `.banneker/state/`:
   ```bash
   ls .banneker/state/*.md 2>/dev/null
   ```

   For each state file:
   - Read the file content
   - Extract YAML frontmatter fields: `command`, `status`, `started_at`, `items_completed`, `items_total`, `current_position`
   - Parse markdown body for progress checklist (lines matching `- [x]` and `- [ ]`)
   - Calculate completion: (checked items / total items) * 100

4. **Step 3: Check for Handoff Files** — Read `.banneker/state/.continue-here.md` if it exists:
   ```bash
   cat .banneker/state/.continue-here.md 2>/dev/null
   ```
   If exists, display as "Pending Handoff" with the handoff file contents.

5. **Step 4: Check Available Outputs** — Scan for completed workflow outputs:
   - `.banneker/survey.json` — Survey complete
   - `.banneker/architecture-decisions.json` — Decisions captured
   - `.banneker/documents/` — Documents generated (list which ones)
   - `.banneker/diagrams/` — Diagrams generated (list which ones)
   - `.banneker/appendix/` — Appendix compiled
   - `.banneker/exports/` — Exports generated (list which ones)

6. **Step 5: Display Summary** — Show grouped status:
   - **In Progress:** Commands with active state files (name, % complete, current position)
   - **Pending Handoff:** Handoff files awaiting resume
   - **Completed Outputs:** Available output files/directories
   - **Next Steps:** Based on what exists and what's missing, suggest the next logical command

This is a read-only stateless command. Do NOT add resume detection or state tracking — progress is not a long-running command. No sub-agent needed.

The state file format uses YAML frontmatter + markdown body, matching the pattern established in Phase 3 (survey-state.md). The command parses this format using bash commands (grep, sed) since it runs within the LLM runtime, not as Node.js code.
  </action>
  <verify>
Verify the file has:
- Valid YAML frontmatter with name and description
- Step to check .banneker directory existence
- State file reading and parsing logic
- Handoff file (.continue-here.md) detection
- Output file scanning for all 6 artifact types
- Summary display with in-progress, pending, completed sections
- Next steps recommendation logic
- No resume detection or state tracking

```bash
grep -c "banneker/state" templates/commands/banneker-progress.md
# Should show 3+ occurrences (state directory references)
grep "\.continue-here\.md" templates/commands/banneker-progress.md
# Should find the handoff file reference
```
  </verify>
  <done>banneker-progress.md contains a complete progress command that reads state files, detects handoffs, scans available outputs, and displays workflow status with next-step recommendations. File has valid frontmatter.</done>
</task>

</tasks>

<verification>
1. Both files exist and have valid YAML frontmatter:
   ```bash
   head -5 templates/commands/banneker-help.md
   head -5 templates/commands/banneker-progress.md
   ```
2. Help command references all Banneker commands (survey, architect, document, audit, roadmap, appendix, feed, help, progress, plat)
3. Progress command handles all state: no .banneker dir, state files present, handoff present, outputs present, all complete
4. Neither command includes resume detection or state tracking (both are stateless read-only)
</verification>

<success_criteria>
- banneker-help.md is a complete command reference replacing the Phase 1 stub
- banneker-progress.md is a new command that reads all state file types and displays status
- Both commands follow the markdown skill file format with valid frontmatter
- Help command covers all 10+ Banneker commands grouped by category
- Progress command handles 4 states: uninitialized, in-progress, handoff pending, all complete
</success_criteria>

<output>
After completion, create `.planning/phases/09-polish-and-ops/09-01-SUMMARY.md`
</output>
