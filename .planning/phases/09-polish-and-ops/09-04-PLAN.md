---
phase: 09-polish-and-ops
plan: 04
type: execute
wave: 2
depends_on: ["09-01", "09-02"]
files_modified:
  - lib/constants.js
  - test/integration/skill-validation.test.js
  - test/smoke/full-install.test.js
autonomous: true

must_haves:
  truths:
    - "All Phase 9 template files are tracked in BANNEKER_FILES manifest"
    - "Integration tests validate frontmatter for new command and agent files"
    - "Smoke test verifies all Phase 9 files install correctly"
    - "npm test passes with all new test cases"
  artifacts:
    - path: "lib/constants.js"
      provides: "Updated manifests with Phase 9 files"
      contains: "banneker-plat"
    - path: "test/integration/skill-validation.test.js"
      provides: "Frontmatter validation for Phase 9 templates"
      contains: "banneker-plat"
    - path: "test/smoke/full-install.test.js"
      provides: "Installation verification for Phase 9 files"
      contains: "banneker-plat"
  key_links:
    - from: "lib/constants.js"
      to: "templates/commands/banneker-plat.md"
      via: "BANNEKER_FILES manifest entry"
      pattern: "banneker-plat"
    - from: "lib/constants.js"
      to: "templates/agents/banneker-plat-generator.md"
      via: "AGENT_FILES manifest entry"
      pattern: "banneker-plat-generator"
---

<objective>
Update installer manifests and tests to track all new Phase 9 template files.

Purpose: Every template file must be tracked in BANNEKER_FILES for the installer to copy it and the uninstaller to remove it. Integration tests validate frontmatter, and smoke tests verify installation. This follows the established pattern from Phases 4-8.

Output: Updated constants.js, skill-validation.test.js, and full-install.test.js.
</objective>

<execution_context>
@/home/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/home/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@lib/constants.js (manifests to update)
@test/integration/skill-validation.test.js (add frontmatter tests)
@test/smoke/full-install.test.js (add installation tests)
@.planning/phases/08-brownfield-analysis-audit/08-04-SUMMARY.md (reference for manifest update pattern)
@.planning/phases/09-polish-and-ops/09-01-SUMMARY.md (new files from Plan 01)
@.planning/phases/09-polish-and-ops/09-02-SUMMARY.md (new files from Plan 02)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update installer manifests in constants.js</name>
  <files>lib/constants.js</files>
  <action>
Update lib/constants.js to add all Phase 9 template files to the appropriate manifests.

**New files to add:**

Commands (3 files — note: banneker-help.md already exists in BANNEKER_FILES from Phase 1):
- `banneker-progress.md` — add to BANNEKER_FILES
- `banneker-plat.md` — add to BANNEKER_FILES

Agents (1 file):
- `agents/banneker-plat-generator.md` — add to BANNEKER_FILES
- `banneker-plat-generator.md` — add to AGENT_FILES

**BANNEKER_FILES changes:**
Add these entries in alphabetical order within their section:
- `'banneker-plat.md'` (command, alphabetically after banneker-help.md)
- `'banneker-progress.md'` (command, alphabetically after banneker-plat.md)
- `'agents/banneker-plat-generator.md'` (agent, alphabetically after banneker-exporter.md)

banneker-help.md is already in BANNEKER_FILES — verify it's there, do NOT add a duplicate.

**AGENT_FILES changes:**
Add `'banneker-plat-generator.md'` alphabetically (after banneker-exporter.md).

**CONFIG_FILES:** No changes needed — no new config files in Phase 9.

After changes:
- BANNEKER_FILES should have 23 entries (was 20 from Phase 8, plus 3 new)
- AGENT_FILES should have 9 entries (was 8 from Phase 8, plus 1 new)
- CONFIG_FILES stays at 3 entries

Maintain existing alphabetical ordering within each section. Keep the comment structure intact.
  </action>
  <verify>
```bash
# Count entries in each manifest
node -e "import {BANNEKER_FILES, AGENT_FILES, CONFIG_FILES} from './lib/constants.js'; console.log('BANNEKER_FILES:', BANNEKER_FILES.length); console.log('AGENT_FILES:', AGENT_FILES.length); console.log('CONFIG_FILES:', CONFIG_FILES.length);"
# Expected: BANNEKER_FILES: 23, AGENT_FILES: 9, CONFIG_FILES: 3

# Verify new entries exist
node -e "import {BANNEKER_FILES} from './lib/constants.js'; console.log(BANNEKER_FILES.filter(f => f.includes('plat') || f.includes('progress')));"
# Expected: ['banneker-plat.md', 'banneker-progress.md', 'agents/banneker-plat-generator.md']

# Verify no duplicate banneker-help.md
node -e "import {BANNEKER_FILES} from './lib/constants.js'; const dupes = BANNEKER_FILES.filter(f => f === 'banneker-help.md'); console.log('help count:', dupes.length);"
# Expected: help count: 1
```
  </verify>
  <done>BANNEKER_FILES has 23 entries, AGENT_FILES has 9 entries, CONFIG_FILES unchanged at 3. All Phase 9 template files tracked. No duplicates.</done>
</task>

<task type="auto">
  <name>Task 2: Add integration and smoke tests for Phase 9 files</name>
  <files>test/integration/skill-validation.test.js, test/smoke/full-install.test.js</files>
  <action>
Add test cases for all new Phase 9 template files following the established pattern from Phases 4-8.

**test/integration/skill-validation.test.js — add 3 new test cases:**

1. **banneker-plat.md frontmatter validation** — Verify the command file has valid YAML frontmatter with `name: banneker-plat` and a non-empty `description` field. Follow the same pattern as existing command tests (banneker-survey, banneker-architect, etc.).

2. **banneker-progress.md frontmatter validation** — Verify the command file has valid YAML frontmatter with `name: banneker-progress` and a non-empty `description` field.

3. **banneker-plat-generator.md frontmatter validation** — Verify the agent file has valid YAML frontmatter with `name: banneker-plat-generator` and a non-empty `description` field. Follow the same pattern as existing agent tests (banneker-surveyor, banneker-architect agent, etc.).

Note: banneker-help.md should already have a test from Phase 1 — verify this exists, do NOT add a duplicate test. If the Phase 1 test validates the stub frontmatter, update it to validate the new frontmatter (name: banneker-help with real description instead of stub description).

**test/smoke/full-install.test.js — add installation verification:**

Add the 3 new files (banneker-plat.md, banneker-progress.md, agents/banneker-plat-generator.md) to the installation verification. Follow the same pattern as existing entries — verify files exist after a simulated install.

Use the exact same test patterns as existing tests in these files. Read the existing test structure first, then append new test cases in the same style.
  </action>
  <verify>
```bash
# Run all tests
npm test --prefix /home/daniel/Documents/banneker

# Check new test cases exist
grep "banneker-plat" test/integration/skill-validation.test.js
grep "banneker-progress" test/integration/skill-validation.test.js
grep "banneker-plat-generator" test/integration/skill-validation.test.js
grep "banneker-plat\|banneker-progress\|banneker-plat-generator" test/smoke/full-install.test.js
```
  </verify>
  <done>Integration tests validate frontmatter for all 3 new Phase 9 template files. Smoke test verifies installation of all Phase 9 files. All tests pass with npm test.</done>
</task>

</tasks>

<verification>
1. `npm test` passes with all new test cases
2. BANNEKER_FILES count is 23 (verify with node -e import)
3. AGENT_FILES count is 9
4. No duplicate entries in any manifest
5. Integration tests cover: banneker-plat.md, banneker-progress.md, banneker-plat-generator.md
6. Smoke test includes all 3 new Phase 9 files in installation verification
</verification>

<success_criteria>
- All Phase 9 template files tracked in installer manifests
- Integration tests validate frontmatter for each new template
- Smoke test verifies installation of all new files
- npm test passes with 0 failures
- Manifest counts: BANNEKER_FILES=23, AGENT_FILES=9, CONFIG_FILES=3
</success_criteria>

<output>
After completion, create `.planning/phases/09-polish-and-ops/09-04-SUMMARY.md`
</output>
