---
phase: 11-engineer-agent-core
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - templates/agents/banneker-engineer.md
  - templates/config/engineering-catalog.md
autonomous: true

must_haves:
  truths:
    - "Engineering catalog defines three-document structure (DIAGNOSIS, RECOMMENDATION, ENGINEERING-PROPOSAL)"
    - "Catalog specifies confidence level system (HIGH/MEDIUM/LOW) with probabilistic ranges"
    - "Engineer sub-agent can generate documents from survey.json"
    - "Each document section maps to survey.json fields"
  artifacts:
    - path: "templates/agents/banneker-engineer.md"
      provides: "Sub-agent that generates three engineering documents"
      min_lines: 400
      contains: "DIAGNOSIS.md"
    - path: "templates/config/engineering-catalog.md"
      provides: "Document structures, confidence rules, survey mappings"
      min_lines: 200
      contains: "HIGH/MEDIUM/LOW"
  key_links:
    - from: "templates/agents/banneker-engineer.md"
      to: "templates/config/engineering-catalog.md"
      via: "references catalog for document structures"
      pattern: "engineering-catalog"
    - from: "templates/agents/banneker-engineer.md"
      to: ".banneker/survey.json"
      via: "reads survey data for synthesis"
      pattern: "survey\\.json"
---

<objective>
Create the engineer sub-agent and engineering document catalog that define how survey data is synthesized into three engineering documents (DIAGNOSIS.md, RECOMMENDATION.md, ENGINEERING-PROPOSAL.md) with confidence markers.

Purpose: Establish the core document generation capability for the engineer command, following the banneker-architect + document-catalog pattern already established in the codebase.

Output: Two template files - the engineer sub-agent and the engineering catalog reference.
</objective>

<execution_context>
@/home/daniel/.claude/get-shit-done/workflows/execute-plan.md
@/home/daniel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-engineer-agent-core/11-RESEARCH.md

# Pattern references (follow these structures)
@templates/agents/banneker-architect.md
@templates/config/document-catalog.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create engineering-catalog.md</name>
  <files>templates/config/engineering-catalog.md</files>
  <action>
Create the engineering catalog reference file following the document-catalog.md pattern. Include:

**Three-Document Architecture (from RESEARCH):**
1. DIAGNOSIS.md - Gap analysis identifying what is known, what is missing, where gaps exist
2. RECOMMENDATION.md - Options analysis with trade-offs and alternatives considered
3. ENGINEERING-PROPOSAL.md - Concrete decisions in DEC-XXX ADR format

**For each document define:**
- Purpose and when generated (all three always generated)
- Section structure with specific headings
- Survey mapping (which survey.json fields map to which sections)
- Dependencies (DIAGNOSIS -> RECOMMENDATION -> PROPOSAL sequential)

**Confidence Level System (from RESEARCH):**
- HIGH (85-90% likelihood): Well-understood work, complete information, standard industry practice
- MEDIUM (50-85% likelihood): Reasonably understood, some gaps but key constraints known
- LOW (<50% likelihood): Unexplored territory, significant information gaps

**Confidence Rationale Requirements:**
- Every recommendation/decision MUST include "Confidence Rationale:" subsection
- Rationale must cite specific evidence: survey completeness, section presence/absence
- Rationale must reference survey sections by name

**ADR Format for ENGINEERING-PROPOSAL.md (from RESEARCH):**
- DEC-XXX: [Decision Title]
- Status: Proposed (awaiting approval)
- Context: Survey data that informed decision
- Decision: Concrete choice
- Rationale: Why this over alternatives
- Consequences: Positive and negative
- Alternatives Considered: With rejection reasons
- Confidence: HIGH/MEDIUM/LOW with rationale
- Dependencies: Related decisions

**Quality Standards:**
- Zero placeholder patterns (same list as document-catalog.md)
- Term consistency with survey.json
- Decision citations use (DEC-XXX) format
  </action>
  <verify>
File exists at templates/config/engineering-catalog.md with:
- grep "DIAGNOSIS.md" returns results
- grep "RECOMMENDATION.md" returns results
- grep "ENGINEERING-PROPOSAL.md" returns results
- grep "HIGH.*MEDIUM.*LOW" returns results (confidence levels)
- grep "DEC-XXX" returns results (ADR format)
- File is >200 lines
  </verify>
  <done>
Engineering catalog defines all three documents with section structures, survey mappings, confidence system, and ADR format for proposals.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create banneker-engineer.md sub-agent</name>
  <files>templates/agents/banneker-engineer.md</files>
  <action>
Create the engineer sub-agent following the banneker-architect.md pattern. The engineer:

**Role:**
"You are the Banneker Engineer. You synthesize survey data into engineering documents that make explicit what is known, what is unknown, and what decisions are being proposed with transparent confidence levels."

**Input Files:**
1. `.banneker/survey.json` - Survey data (may be partial)
2. `.banneker/architecture-decisions.json` - Existing decisions (may be empty)
3. `engineering-catalog.md` - Reference for document structures and confidence rules

**Output Files:**
1. `.banneker/documents/DIAGNOSIS.md` - Gap analysis
2. `.banneker/documents/RECOMMENDATION.md` - Options analysis
3. `.banneker/documents/ENGINEERING-PROPOSAL.md` - DEC-XXX proposals
4. `.banneker/state/engineer-state.md` - Progress state for resume

**Step-by-step workflow:**

**Step 1: Load and Parse Inputs**
- Read survey.json, handle missing/partial gracefully
- Read architecture-decisions.json if exists
- Load engineering-catalog.md reference
- Validate JSON parsing

**Step 2: Analyze Survey Completeness**
- Check for minimum viable survey (Phase 1+2+3: project, actors, walkthroughs)
- Detect gaps using survey.rubric_coverage.gaps[] if present
- Check backend section completeness if backend.applicable === true
- Compute overall survey completeness percentage
- Determine confidence baseline

**Step 3: Generate DIAGNOSIS.md (Wave 1)**
Structure from catalog:
- What Is Known: Survey data summary by section
- What Is Missing: Explicit gap list from survey analysis
- Information Quality Assessment: Per-section confidence
- Critical Unknowns: Gaps that affect recommendations

Write to .banneker/documents/DIAGNOSIS.md
Update state file

**Step 4: Generate RECOMMENDATION.md (Wave 2)**
Using DIAGNOSIS as input:
- For each architecture area (frontend, backend, database, hosting, auth, etc.)
- Generate recommendation with options analysis
- Include trade-offs and alternatives considered
- Apply confidence marker with rationale citing DIAGNOSIS gaps
- Reference specific survey sections as evidence

Write to .banneker/documents/RECOMMENDATION.md
Update state file

**Step 5: Generate ENGINEERING-PROPOSAL.md (Wave 3)**
Using RECOMMENDATION as input:
- For each recommendation, generate DEC-XXX proposal
- Use ADR format from catalog
- Include "Options Considered" citing RECOMMENDATION sections
- Apply confidence marker with rationale
- Mark all as "Status: Proposed (awaiting approval)"

Write to .banneker/documents/ENGINEERING-PROPOSAL.md
Update state file

**Step 6: Report Results**
- List generated documents with sizes
- Summarize confidence distribution
- Note that proposals require approval (do NOT merge to architecture-decisions.json)
- Suggest next step: /banneker:approve-proposal (Phase 13)

**State Management (ENGINT-05):**
- Write state after each document completes
- State includes: started_at, last_updated, completed documents, pending documents, survey completeness, confidence baseline

**Error Handling:**
- No survey.json: Error message, abort
- Partial survey: Generate all docs with reduced confidence, explicit gap notes
- Empty architecture-decisions.json: OK, proceed (first run scenario)

**CRITICAL - Do NOT:**
- Merge proposals to architecture-decisions.json (requires user approval)
- Use placeholder patterns ([TODO], TBD, etc.)
- Invent survey data not present
- Assign HIGH confidence when information is missing
  </action>
  <verify>
File exists at templates/agents/banneker-engineer.md with:
- grep "Banneker Engineer" returns results
- grep "DIAGNOSIS.md" returns results
- grep "RECOMMENDATION.md" returns results
- grep "ENGINEERING-PROPOSAL.md" returns results
- grep "survey.json" returns results
- grep "engineer-state.md" returns results
- grep "HIGH.*MEDIUM.*LOW" or grep "confidence" returns results
- File is >400 lines
  </verify>
  <done>
Engineer sub-agent can load survey data, analyze completeness, generate three documents sequentially with confidence markers, and track state for resume.
  </done>
</task>

</tasks>

<verification>
1. Both files exist in templates/ directories
2. engineering-catalog.md defines all three documents with structures
3. banneker-engineer.md references engineering-catalog
4. Confidence level system documented and applied
5. ADR format specified for ENGINEERING-PROPOSAL.md
6. State management for resume included
7. Partial survey handling addressed
</verification>

<success_criteria>
- templates/config/engineering-catalog.md exists with three-document specs and confidence rules
- templates/agents/banneker-engineer.md exists with complete workflow
- Both files follow established Banneker patterns (document-catalog.md, banneker-architect.md)
- ENGDOC-01, ENGDOC-02, ENGDOC-03, ENGDOC-04 requirements addressed in specs
</success_criteria>

<output>
After completion, create `.planning/phases/11-engineer-agent-core/11-01-SUMMARY.md`
</output>
